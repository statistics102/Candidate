<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candidate Screening Form - Teaching Positions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .form-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .section:nth-child(1) { animation-delay: 0.1s; }
        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }
        .section:nth-child(5) { animation-delay: 0.5s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            position: relative;
        }

        .section-title::before {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 50px;
            height: 3px;
            background: #e74c3c;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
            font-size: 1.05em;
        }

        .required {
            color: #e74c3c;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="file"],
        input[type="url"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkbox-item:hover,
        .radio-item:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .checkbox-item input,
        .radio-item input {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .scale-group {
            display: grid;
            gap: 15px;
        }

        .scale-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .scale-options {
            display: flex;
            gap: 15px;
        }

        .scale-options input[type="radio"] {
            width: auto;
            margin: 0;
        }

        .scale-label {
            font-weight: 500;
            color: #2c3e50;
            flex: 1;
        }

        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #ecf0f1;
        }

        .submit-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(52, 152, 219, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .progress-bar {
            height: 4px;
            background: #ecf0f1;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        .conditional {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f0f8ff;
            border-left: 4px solid #3498db;
            border-radius: 0 8px 8px 0;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .scale-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .scale-options {
                justify-content: space-between;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>Candidate Screening Form</h1>
            <p>Teaching Positions - Complete Assessment</p>
        </div>

        <form class="form-content" id="candidateForm">
            <!-- Section 1: Personal and Professional Data -->
            <div class="section">
                <h2 class="section-title">Personal and Professional Data Collection</h2>
                
                <div class="form-group">
                    <label for="fullName">Full Name <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="nationality">Nationality <span class="required">*</span></label>
                    <input type="text" id="nationality" name="nationality" required 
                           placeholder="If applying for English teaching, specify: USA, UK, Canada, Australia, South Africa, New Zealand, or Ireland">
                </div>

                <div class="form-group">
                    <label for="idNumber">National ID or Passport Number <span class="required">*</span></label>
                    <input type="text" id="idNumber" name="idNumber" required>
                </div>

                <div class="form-group">
                    <label for="gender">Gender <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="male" name="gender" value="male" required>
                            <label for="male">Male</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="female" name="gender" value="female" required>
                            <label for="female">Female</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="preferNotToSay" name="gender" value="prefer-not-to-say" required>
                            <label for="preferNotToSay">Prefer not to say</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="dob">Date of Birth <span class="required">*</span></label>
                    <input type="date" id="dob" name="dob" required>
                </div>

                <div class="form-group">
                    <label for="currentJob">Current Job Title <span class="required">*</span></label>
                    <input type="text" id="currentJob" name="currentJob" required 
                           placeholder="If unemployed, write 'Currently seeking employment'">
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required 
                           placeholder="+Country Code followed by your phone number">
                </div>

                <div class="form-group">
                    <label for="email">Email Address <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required 
                           placeholder="your.email@example.com">
                </div>
            </div>

            <!-- Section 2: Educational Background -->
            <div class="section">
                <h2 class="section-title">Educational Background and Qualifications</h2>
                
                <div class="form-group">
                    <label for="major">Education Major/Field of Study <span class="required">*</span></label>
                    <input type="text" id="major" name="major" required 
                           placeholder="e.g., English Language, Computer Science, Business Administration">
                </div>

                <div class="form-group">
                    <label for="degrees">Academic Degrees <span class="required">*</span></label>
                    <textarea id="degrees" name="degrees" required 
                              placeholder="List all degrees (Bachelor's, Master's, PhD) with institution names and graduation years"></textarea>
                </div>

                <div class="form-group">
                    <label>Relevant Professional Certifications (Select all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="delta" name="certifications" value="DELTA">
                            <label for="delta">DELTA (Diploma in Teaching English to Speakers of Other Languages)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="celta" name="certifications" value="CELTA">
                            <label for="celta">CELTA (Certificate in Teaching English to Speakers of Other Languages)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tesol" name="certifications" value="TESOL">
                            <label for="tesol">TESOL (Teaching English to Speakers of Other Languages)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tefl" name="certifications" value="TEFL">
                            <label for="tefl">TEFL (Teaching English as a Foreign Language)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="otherCert" name="certifications" value="Other">
                            <label for="otherCert">Other relevant teaching certifications</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="noCert" name="certifications" value="None">
                            <label for="noCert">None of the above</label>
                        </div>
                    </div>
                </div>

                <div class="form-group conditional" id="certDetailsGroup">
                    <label for="certDetails">Certification Details</label>
                    <textarea id="certDetails" name="certDetails" 
                              placeholder="For selected certifications, provide institution names, completion dates, and certificate numbers"></textarea>
                </div>
            </div>

            <!-- Section 3: Professional Experience -->
            <div class="section">
                <h2 class="section-title">Professional Experience and Skills</h2>
                
                <div class="form-group">
                    <label for="teachingExp">Teaching Experience <span class="required">*</span></label>
                    <textarea id="teachingExp" name="teachingExp" required 
                              placeholder="How many years? Specify contexts (classroom, online, private tutoring) and age groups taught"></textarea>
                </div>

                <div class="form-group">
                    <label for="postDegreeExp">Post-Degree Teaching Experience <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="expYes" name="postDegreeExp" value="yes" required>
                            <label for="expYes">Yes, I have 2+ years post-master's teaching experience</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="expSaudi" name="postDegreeExp" value="saudi" required>
                            <label for="expSaudi">No, but I am a Saudi national</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="expNo" name="postDegreeExp" value="no" required>
                            <label for="expNo">No, I do not meet this requirement</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="expNA" name="postDegreeExp" value="na" required>
                            <label for="expNA">Not applicable (I am a native English speaker)</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="computerExp">Computer Literacy and Technology Integration <span class="required">*</span></label>
                    <textarea id="computerExp" name="computerExp" required 
                              placeholder="Describe your experience using computer technology in teaching. Include specific software, platforms, LMS, and digital tools"></textarea>
                </div>

                <div class="form-group">
                    <label>Technical Skills Assessment <span class="required">*</span></label>
                    <div class="scale-group">
                        <div class="scale-item">
                            <div class="scale-label">Basic computer operations (Word, Excel, PowerPoint)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="basicComputer" value="1" required>
                                <input type="radio" name="basicComputer" value="2" required>
                                <input type="radio" name="basicComputer" value="3" required>
                                <input type="radio" name="basicComputer" value="4" required>
                                <input type="radio" name="basicComputer" value="5" required>
                                <span>Expert</span>
                            </div>
                        </div>
                        
                        <div class="scale-item">
                            <div class="scale-label">Online teaching platforms (Zoom, Teams, Google Classroom)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="onlinePlatforms" value="1" required>
                                <input type="radio" name="onlinePlatforms" value="2" required>
                                <input type="radio" name="onlinePlatforms"极值="3" required>
                                <input type="radio" name="onlinePlatforms" value="4" required>
                                <input type="radio" name="onlinePlatforms" value="5" required>
                                <span>Expert</span>
                            </div>
                        </div>
                        
                        <div class="scale-item">
                            <div class="scale-label">Learning Management Systems (Moodle, Blackboard, Canvas)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="lms" value="1" required>
                                <input type="radio" name="lms" value="极值" required>
                                <input type="radio" name="lms" value="3" required>
                                <input type="radio" name="lms" value="4" required>
                                <input type="radio" name="lms" value="5" required>
                                <极值>Expert</span>
                            </div>
                        </div>
                        
                        <div class="scale-item">
                            <div class="scale-label">Educational technology tools (interactive whiteboards, educational apps)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="edTech" value="1" required>
                                <input type="radio" name="edTech" value="2" required>
                                <input type="radio" name="edTech" value="3" required>
                                <input type="radio" name="edTech" value="4" required>
                                <input type="radio" name="edTech" value="5" required>
                                <span>Expert</span>
                            </div>
                        </div>
                        
                        <div class="scale-item">
                            <div class="scale-label">Content creation tools (video editing, presentation software)</极值>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="contentCreation" value="1" required>
                                <input type="radio" name="contentCreation" value="2" required>
                                <input type="radio" name="contentCreation" value="3" required>
                                <input type="radio" name="contentCreation" value="4" required>
                                <input type="radio" name="contentCreation" value="5" required>
                                <span>Expert</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Cultural Fit -->
            <div class="section">
                <h2 class="section-title">Cultural Fit and Motivation</h2>
                
                <div class="form-group">
                    <label for="teachingPhilosophy">Teaching Philosophy <span class="required">*</span></label>
                    <textarea id="teachingPhilosoph极值" name="teachingPhilosophy" required 
                              placeholder="Briefly describe your teaching philosophy and approach to student engagement"></textarea>
                </div>

                <div class="form-group">
                    <label for="multiculturalExp">Multicultural Experience <span class="required">*</span></label>
                    <textarea id="multiculturalExp" name="multiculturalExp" required 
                              placeholder="Do you have experience working in multicultural or international educational environments? Please describe."></textarea>
                </div>

                <div class="form-group">
                    <label for="adaptability">Adaptability and Flexibility <span class="required">*</span></label>
                    <textarea id="adaptability" name="adaptability" required 
                              placeholder="Describe a situation where you had to adapt your teaching methods to meet diverse student needs or unexpected circumstances"></textarea>
                </极值>

                <div class="form-group">
                    <label>Professional Development Commitment (Select all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="profCourses" name="profDevelopment" value="courses">
                            <label for="profCourses">Regular professional development courses</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="conferences" name="profDevelopment" value="conferences">
                            <label for="conferences">Academic conferences and workshops</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="associations" name="profDevelopment" value="associations">
                            <label for="associations">Professional associations and networks</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="onlineLearning" name="profDevelopment" value="online">
                            <label for="onlineLearning">Online learning and webinars</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="peerCollab" name="profDevelopment" value="peer">
                            <label for="peer极值">Peer collaboration and mentoring</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="otherDev" name="profDevelopment" value="other">
                            <label for="otherDev">Other (please specify below)</label>
                        </div>
                    </div>
                    <div class="conditional" id="otherDevGroup">
                        <input type="text" id="otherDevText" name="otherDevText" placeholder="Please specify other professional development activities">
                    </div>
                </div>
            </div>

            <!-- Section 5: Documentation -->
            <div class="section">
                <h2 class="section-title">Documentation and Additional Information</h2>
                
                <div class="form-group">
                    <label for="cvUpload">CV/Resume Upload <span class="required">*</span></label>
                    <input type="file" id="cvUpload" name="cvUpload" accept=".pdf,.doc,.docx" required>
                    <small style="color: #7f8c8d; margin-top: 5px; display: block;">Or provide a link to your professional profile below:</small>
                    <input type="url" id="cvLink" name="cvLink" placeholder="https://linkedin.com/in/yourprofile" style="margin-top: 10px;">
                </div>

                <div class="form-group">
                    <label for="additionalQual">Additional Qualifications</label>
                    <textarea id="additionalQual" name="additionalQual" 
                              placeholder="极值 any additional qualifications, achievements, or experiences that make you suitable for this position"></textarea>
                </div>

                <div class="form-group">
                    <label for="availability">Availability and Preferences <span class="required">*</span></label>
                    <textarea id="availability" name="availability" required 
                              placeholder="What is your preferred start date and are there any scheduling constraints we should be aware of?"></textarea>
                </div>
            </div>

            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit Application</button>
            </div>
        </form>
    </div>

    <script>
    // ... (keep all your other functions: updateProgressBar, setupConditionalFields) ...

    // ✅ USE YOUR ACTUAL DEPLOYMENT URL HERE
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyrKuohzQvQuUz_TKO极值-HyYeJAMO1mNCby1EzcYtpfcNoFwtsUrWdQsfp9qJOp7T8/exec';
    
    // Form validation and submission - FIXED VERSION
    function setupFormValidation() {
        const form = document.getElementById('candidateForm');
        if (!form) {
            console.error("Form with ID 'candidateForm' not found.");
            return;
        }
        
        const submitBtn = document.querySelector('.submit-btn');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // ... (keep your validation code exactly as it was) ...
            
            // Show loading state
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            
            try {
                // Collect form data
                const formData = new FormData(form);
                const data = {};
                
                for (let [key, value] of formData.entries()) {
                    if (data[key]) {
                        if (Array.isArray(data[key])) {
                            data[key].push(value);
                        } else {
                            data[key] = [data[key], value];
                        }
                    } else {
                        data[key] = value;
                    }
                }
                
                // Format data for Google Sheets
                const sheetData = {
                    timestamp: new Date().toLocaleString(),
                    fullName: data.fullName,
                    nationality: data.nationality,
                    idNumber: data.idNumber,
                    gender: data.gender,
                    dob: data.dob,
                    currentJob: data.currentJob,
                    phone: data.phone,
                    email: data.email,
                    major: data.major,
                    degrees: data.degrees,
                    certifications: Array.isArray(data.certifications) ? data.certifications.join(', ') : data.certifications || 'None',
                    certDetails: data.certDetails || '',
                    teachingExp: data.teachingExp,
                    postDegreeExp: data.postDegreeExp,
                    computerExp: data.computerExp,
                    basicComputer: data.basicComputer,
                    onlinePlatforms: data.onlinePlatforms,
                    lms: data.lms,
                    edTech: data.edTech,
                    contentCreation: data.contentCreation,
                    teachingPhilosophy: data.teachingPhilosophy,
                    multiculturalExp: data.multiculturalExp,
                    adaptability: data.adaptability,
                    profDevelopment: Array.isArray(data.profDevelopment) ? data.profDevelopment.join(', ') : data.profDevelopment || 'None',
                    otherDevText: data.otherDevText || '',
                    cvLink: data.cvLink || '',
                    additionalQual: data.additionalQual || '',
                    availability: data.availability
                };
                
                console.log('Sending data to Google Sheets:', sheetData);
                
                // ✅ FIXED: Use fetch with proper error handling
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(sheetData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.result === 'success') {
                        alert('✅ Form submitted successfully! Data saved to row ' + result.row);
                        form.reset();
                        updateProgressBar();
                    } else {
                        throw new Error(result.error || 'Unknown error from Google Script');
                    }
                } else {
                    throw new Error(`Server returned ${response.status}: ${response.statusText}`);
                }
                
            } catch (error) {
                console.error('Submission error:', error);
                alert('❌ Error: ' + error.message + '. Please check console for details.');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    }

    // Initialize all functionality
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Form initialization started...');
        setupConditionalFields();
        setupFormValidation();
        
        const form = document.getElementById('candidateForm');
        if (form) {
            form.addEventListener('input', updateProgressBar);
            form.addEventListener('change', updateProgressBar);
        }
        
        updateProgressBar();
        console.log('Form initialization completed');
    });
</script>
</body>
</html>
