<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candidate Screening Form - Teaching Positions</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.2em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .form-content { padding: 40px; }
        .section { margin-bottom: 40px; opacity: 0; transform: translateY(20px); animation: fadeInUp 0.6s ease forwards; }
        .section:nth-child(1) { animation-delay: 0.1s; }
        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }
        .section:nth-child(5) { animation-delay: 0.5s; }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        .section-title { font-size: 1.5em; color: #2c3e50; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #3498db; position: relative; }
        .section-title::before { content: ''; position: absolute; bottom: -3px; left: 0; width: 50px; height: 3px; background: #e74c3c; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #34495e; font-size: 1.05em; }
        .required { color: #e74c3c; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="file"], input[type="url"], select, textarea { width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; background: #fafafa; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #3498db; background: white; box-shadow: 0 0 10px rgba(52, 152, 219, 0.1); }
        textarea { resize: vertical; min-height: 100px; }
        .checkbox-group, .radio-group { display: flex; flex-direction: column; gap: 10px; }
        .checkbox-item, .radio-item { display: flex; align-items: center; padding: 10px; border: 1px solid #e0e0e0; border-radius: 8px; transition: all 0.3s ease; cursor: pointer; }
        .checkbox-item:hover, .radio-item:hover { background: #f8f9fa; border-color: #3498db; }
        .checkbox-item input, .radio-item input { margin-right: 10px; transform: scale(1.2); }
        .scale-group { display: grid; gap: 15px; }
        .scale-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0; }
        .scale-options { display: flex; gap: 15px; }
        .scale-options input[type="radio"] { width: auto; margin: 0; }
        .scale-label { font-weight: 500; color: #2c3e50; flex: 1; }
        .submit-section { text-align: center; margin-top: 40px; padding-top: 30px; border-top: 2px solid #ecf0f1; }
        .submit-btn { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; padding: 15px 40px; border: none; border-radius: 50px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3); }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 25px rgba(52, 152, 219, 0.4); }
        .submit-btn:active { transform: translateY(0); }
        .progress-bar { height: 4px; background: #ecf0f1; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #3498db, #2980b9); width: 0%; transition: width 0.3s ease; }
        .conditional { display: none; margin-top: 15px; padding: 15px; background: #f0f8ff; border-left: 4px solid #3498db; border-radius: 0 8px 8px 0; }
        .error { color: #e74c3c; font-size: 0.9em; margin-top: 5px; display: none; }
        input.error-field, textarea.error-field { border-color: #e74c3c; }
        .success-message { display: none; background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
        @media (max-width: 768px) { 
            .form-content { padding: 20px; } 
            .header { padding: 20px; } 
            .header h1 { font-size: 1.8em; } 
            .scale-item { flex-direction: column; align-items: flex-start; gap: 10px; } 
            .scale-options { justify-content: space-between; width: 100%; } 
        }
    </style>
</head>
<body>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="container">
        <div class="header"><h1>Candidate Screening Form</h1><p>Teaching Positions - Complete Assessment</p></div>
        <div class="success-message" id="successMessage">
            <h3>âœ… Application Submitted Successfully!</h3>
            <p>Thank you for your application. We will review your information and contact you soon.</p>
        </div>
        <form class="form-content" id="candidateForm">
            <!-- Section 1: Personal and Professional Data -->
            <div class="section">
                <h2 class="section-title">Personal and Professional Data Collection</h2>
                <div class="form-group">
                    <label for="fullName">Full Name <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                    <div class="error" id="fullNameError">Please enter your full name</div>
                </div>
                <div class="form-group">
                    <label for="nationality">Nationality <span class="required">*</span></label>
                    <input type="text" id="nationality" name="nationality" required placeholder="USA, UK, Canada, Australia, etc.">
                    <div class="error" id="nationalityError">Please enter your nationality</div>
                </div>
                <div class="form-group">
                    <label for="idNumber">National ID or Passport Number <span class="required">*</span></label>
                    <input type="text" id="idNumber" name="idNumber" required>
                    <div class="error" id="idNumberError">Please enter your ID or passport number</div>
                </div>
                <div class="form-group">
                    <label for="gender">Gender <span class="required">*</span></label>
                    <div class="radio-group" id="genderGroup">
                        <div class="radio-item"><input type="radio" id="male" name="gender" value="male" required><label for="male">Male</label></div>
                        <div class="radio-item"><input type="radio" id="female" name="gender" value="female" required><label for="female">Female</label></div>
                        <div class="radio-item"><input type="radio" id="preferNotToSay" name="gender" value="prefer-not-to-say" required><label for="preferNotToSay">Prefer not to say</label></div>
                    </div>
                    <div class="error" id="genderError">Please select your gender</div>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth <span class="required">*</span></label>
                    <input type="date" id="dob" name="dob" required>
                    <div class="error" id="dobError">Please enter your date of birth</div>
                </div>
                <div class="form-group">
                    <label for="currentJob">Current Job Title <span class="required">*</span></label>
                    <input type="text" id="currentJob" name="currentJob" required placeholder="If unemployed, write 'Currently seeking employment'">
                    <div class="error" id="currentJobError">Please enter your current job title</div>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required placeholder="+Country Code followed by your phone number">
                    <div class="error" id="phoneError">Please enter a valid phone number</div>
                </div>
                <div class="form-group">
                    <label for="email">Email Address <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                    <div class="error" id="emailError">Please enter a valid email address</div>
                </div>
            </div>

            <!-- Section 2: Educational Background -->
            <div class="section">
                <h2 class="section-title">Educational Background and Qualifications</h2>
                <div class="form-group">
                    <label for="major">Education Major/Field of Study <span class="required">*</span></label>
                    <input type="text" id="major" name="major" required placeholder="e.g., English Language, Computer Science">
                    <div class="error" id="majorError">Please enter your field of study</div>
                </div>
                <div class="form-group">
                    <label for="degrees">Academic Degrees <span class="required">*</span></label>
                    <textarea id="degrees" name="degrees" required placeholder="List all degrees with institution names and graduation years"></textarea>
                    <div class="error" id="degreesError">Please list your academic degrees</div>
                </div>
                <div class="form-group">
                    <label>Relevant Professional Certifications (Select all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="delta" name="certifications" value="DELTA"><label for="delta">DELTA</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="celta" name="certifications" value="CELTA"><label for="celta">CELTA</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tesol" name="certifications" value="TESOL"><label for="tesol">TESOL</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tefl" name="certifications" value="TEFL"><label for="tefl">TEFL</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="otherCert" name="certifications" value="Other"><label for="otherCert">Other relevant teaching certifications</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="noCert" name="certifications" value="None"><label for="noCert">None of the above</label></div>
                    </div>
                </div>
                <div class="conditional" id="certDetailsGroup">
                    <label for="certDetails">Certification Details</label>
                    <textarea id="certDetails" name="certDetails" placeholder="Institution names, completion dates, and certificate numbers"></textarea>
                </div>
            </div>

            <!-- Section 3: Professional Experience -->
            <div class="section">
                <h2 class="section-title">Professional Experience and Skills</h2>
                <div class="form-group">
                    <label for="teachingExp">Teaching Experience <span class="required">*</span></label>
                    <textarea id="teachingExp" name="teachingExp" required placeholder="How many years? Specify contexts and age groups taught"></textarea>
                    <div class="error" id="teachingExpError">Please describe your teaching experience</div>
                </div>
                <div class="form-group">
                    <label for="postDegreeExp">Post-Degree Teaching Experience <span class="required">*</span></label>
                    <div class="radio-group" id="postDegreeExpGroup">
                        <div class="radio-item"><input type="radio" id="expYes" name="postDegreeExp" value="yes" required><label for="expYes">Yes, I have 2+ years post-master's teaching experience</label></div>
                        <div class="radio-item"><input type="radio" id="expSaudi" name="postDegreeExp" value="saudi" required><label for="expSaudi">No, but I am a Saudi national</label></div>
                        <div class="radio-item"><input type="radio" id="expNo" name="postDegreeExp" value="no" required><label for="expNo">No, I do not meet this requirement</label></div>
                        <div class="radio-item"><input type="radio" id="expNA" name="postDegreeExp" value="na" required><label for="expNA">Not applicable (I am a native English speaker)</label></div>
                    </div>
                    <div class="error" id="postDegreeExpError">Please select an option</div>
                </div>
                <div class="form-group">
                    <label for="computerExp">Computer Literacy and Technology Integration <span class="required">*</span></label>
                    <textarea id="computerExp" name="computerExp" required placeholder="Describe your experience using computer technology in teaching"></textarea>
                    <div class="error" id="computerExpError">Please describe your computer literacy</div>
                </div>
                <div class="form-group">
                    <label>Technical Skills Assessment <span class="required">*</span></label>
                    <div class="scale-group">
                        <div class="scale-item">
                            <div class="scale-label">Basic computer operations (Word, Excel, PowerPoint)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="basicComputer" value="1" required>
                                <input type="radio" name="basicComputer" value="2" required>
                                <input type="radio" name="basicComputer" value="3" required>
                                <input type="radio" name="basicComputer" value="4" required>
                                <input type="radio" name="basicComputer" value="5" required>
                                <span>Expert</span>
                            </div>
                            <div class="error" id="basicComputerError">Please rate your skills</div>
                        </div>
                        <div class="scale-item">
                            <div class="scale-label">Online teaching platforms (Zoom, Teams, Google Classroom)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="onlinePlatforms" value="1" required>
                                <input type="radio" name="onlinePlatforms" value="2" required>
                                <input type="radio" name="onlinePlatforms" value="3" required>
                                <input type="radio" name="onlinePlatforms" value="4" required>
                                <input type="radio" name="onlinePlatforms" value="5" required>
                                <span>Expert</span>
                            </div>
                            <div class="error" id="onlinePlatformsError">Please rate your skills</div>
                        </div>
                        <div class="scale-item">
                            <div class="scale-label">Learning Management Systems (Moodle, Blackboard, Canvas)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="lms" value="1" required>
                                <input type="radio" name="lms" value="2" required>
                                <input type="radio" name="lms" value="3" required>
                                <input type="radio" name="lms" value="4" required>
                                <input type="radio" name="lms" value="5" required>
                                <span>Expert</span>
                            </div>
                            <div class="error" id="lmsError">Please rate your skills</div>
                        </div>
                        <div class="scale-item">
                            <div class="scale-label">Educational technology tools (interactive whiteboards, educational apps)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="edTech" value="1" required>
                                <input type="radio" name="edTech" value="2" required>
                                <input type="radio" name="edTech" value="3" required>
                                <input type="radio" name="edTech" value="4" required>
                                <input type="radio" name="edTech" value="5" required>
                                <span>Expert</span>
                            </div>
                            <div class="error" id="edTechError">Please rate your skills</div>
                        </div>
                        <div class="scale-item">
                            <div class="scale-label">Content creation tools (video editing, presentation software)</div>
                            <div class="scale-options">
                                <span>Beginner</span>
                                <input type="radio" name="contentCreation" value="1" required>
                                <input type="radio" name="contentCreation" value="2" required>
                                <input type="radio" name="contentCreation" value="3" required>
                                <input type="radio" name="contentCreation" value="4" required>
                                <input type="radio" name="contentCreation" value="5" required>
                                <span>Expert</span>
                            </div>
                            <div class="error" id="contentCreationError">Please rate your skills</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Cultural Fit -->
            <div class="section">
                <h2 class="section-title">Cultural Fit and Motivation</h2>
                <div class="form-group">
                    <label for="teachingPhilosophy">Teaching Philosophy <span class="required">*</span></label>
                    <textarea id="teachingPhilosophy" name="teachingPhilosophy" required placeholder="Briefly describe your teaching philosophy"></textarea>
                    <div class="error" id="teachingPhilosophyError">Please describe your teaching philosophy</div>
                </div>
                <div class="form-group">
                    <label for="multiculturalExp">Multicultural Experience <span class="required">*</span></label>
                    <textarea id="multiculturalExp" name="multiculturalExp" required placeholder="Experience working in multicultural environments"></textarea>
                    <div class="error" id="multiculturalExpError">Please describe your multicultural experience</div>
                </div>
                <div class="form-group">
                    <label for="adaptability">Adaptability and Flexibility <span class="required">*</span></label>
                    <textarea id="adaptability" name="adaptability" required placeholder="Describe adapting teaching methods"></textarea>
                    <div class="error" id="adaptabilityError">Please describe your adaptability</div>
                </div>
                <div class="form-group">
                    <label>Professional Development Commitment (Select all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="profCourses" name="profDevelopment" value="courses"><label for="profCourses">Regular professional development courses</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="conferences" name="profDevelopment" value="conferences"><label for="conferences">Academic conferences and workshops</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="associations" name="profDevelopment" value="associations"><label for="associations">Professional associations and networks</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="onlineLearning" name="profDevelopment" value="online"><label for="onlineLearning">Online learning and webinars</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="peerCollab" name="profDevelopment" value="peer"><label for="peerCollab">Peer collaboration and mentoring</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="otherDev" name="profDevelopment" value="other"><label for="otherDev">Other (please specify below)</label></div>
                    </div>
                    <div class="conditional" id="otherDevGroup">
                        <input type="text" id="otherDevText" name="otherDevText" placeholder="Please specify other professional development activities">
                    </div>
                </div>
            </div>

            <!-- Section 5: Documentation -->
            <div class="section">
                <h2 class="section-title">Documentation and Additional Information</h2>
                <div class="form-group">
                    <label for="cvUpload">CV/Resume Upload <span class="required">*</span></label>
                    <input type="file" id="cvUpload" name="cvUpload" accept=".pdf,.doc,.docx" required>
                    <small style="color: #7f8c8d; margin-top: 5px; display: block;">Or provide a link to your professional profile below:</small>
                    <input type="url" id="cvLink" name="cvLink" placeholder="https://linkedin.com/in/yourprofile" style="margin-top: 10px;">
                    <div class="error" id="cvUploadError">Please upload your CV or provide a link</div>
                </div>
                <div class="form-group">
                    <label for="additionalQual">Additional Qualifications</label>
                    <textarea id="additionalQual" name="additionalQual" placeholder="List any additional qualifications or experiences"></textarea>
                </div>
                <div class="form-group">
                    <label for="availability">Availability and Preferences <span class="required">*</span></label>
                    <textarea id="availability" name="availability" required placeholder="Preferred start date and scheduling constraints"></textarea>
                    <div class="error" id="availabilityError">Please provide your availability</div>
                </div>
            </div>

            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit Application</button>
            </div>
        </form>
    </div>

    <script>
        // Progress bar functionality
        function updateProgressBar() {
            const form = document.getElementById('candidateForm');
            if (!form) return;
            
            const inputs = form.querySelectorAll('input[required], textarea[required], select[required]');
            const radioGroups = {};
            
            inputs.forEach(input => { 
                if (input.type === 'radio') { 
                    if (!radioGroups[input.name]) radioGroups[input.name] = []; 
                    radioGroups[input.name].push(input); 
                } 
            });
            
            let totalFields = 0;
            let completedFields = 0;
            
            inputs.forEach(input => { 
                if (input.type !== 'radio') { 
                    totalFields++; 
                    if (input.value.trim() !== '') completedFields++; 
                } 
            });
            
            Object.keys(radioGroups).forEach(groupName => { 
                totalFields++; 
                if (radioGroups[groupName].some(radio => radio.checked)) completedFields++; 
            });
            
            const progress = (completedFields / totalFields) * 100;
            const progressFill = document.getElementById('progressFill'); 
            
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
        }

        // Conditional field display
        function setupConditionalFields() {
            const certCheckboxes = document.querySelectorAll('input[name="certifications"]');
            const certDetailsGroup = document.getElementById('certDetailsGroup');
            const noCertCheckbox = document.getElementById('noCert');
            const otherDevCheckbox = document.getElementById('otherDev');
            const otherDevGroup = document.getElementById('otherDevGroup');
            
            if (certDetailsGroup && noCertCheckbox) {
                certCheckboxes.forEach(checkbox => { 
                    checkbox.addEventListener('change', () => {
                        if (noCertCheckbox.checked) { 
                            certCheckboxes.forEach(cb => { 
                                if (cb !== noCertCheckbox) cb.checked = false; 
                            }); 
                            certDetailsGroup.style.display = 'none'; 
                        } else { 
                            const anyChecked = Array.from(certCheckboxes)
                                .filter(cb => cb !== noCertCheckbox)
                                .some(cb => cb.checked); 
                            certDetailsGroup.style.display = anyChecked ? 'block' : 'none'; 
                            if (anyChecked) noCertCheckbox.checked = false; 
                        }
                    }); 
                });
            }
            
            if (otherDevCheckbox && otherDevGroup) { 
                otherDevCheckbox.addEventListener('change', () => { 
                    otherDevGroup.style.display = otherDevCheckbox.checked ? 'block' : 'none'; 
                }); 
            }
        }

        // Form validation
        function validateForm() {
            let isValid = true;
            const form = document.getElementById('candidateForm');
            
            // Clear previous errors
            const errorElements = form.querySelectorAll('.error');
            errorElements.forEach(el => el.style.display = 'none');
            
            const errorInputs = form.querySelectorAll('.error-field');
            errorInputs.forEach(el => el.classList.remove('error-field'));
            
            // Validate required fields
            const requiredFields = form.querySelectorAll('[required]');
            requiredFields.forEach(field => {
                if (field.type === 'radio') {
                    const groupName = field.name;
                    const groupChecked = form.querySelectorAll(`input[name="${groupName}"]:checked`).length > 0;
                    
                    if (!groupChecked) {
                        isValid = false;
                        const errorElement = document.getElementById(`${groupName}Error`);
                        if (errorElement) errorElement.style.display = 'block';
                        
                        // Highlight the radio group
                        const radioGroup = document.getElementById(`${groupName}Group`);
                        if (radioGroup) radioGroup.style.border = '1px solid #e74c3c';
                    }
                } else if (field.type === 'file') {
                    // Check if either file is uploaded or link is provided
                    const fileValue = field.value;
                    const cvLink = document.getElementById('cvLink').value;
                    
                    if (!fileValue && !cvLink) {
                        isValid = false;
                        const errorElement = document.getElementById(`${field.id}Error`);
                        if (errorElement) errorElement.style.display = 'block';
                        field.classList.add('error-field');
                    }
                } else {
                    if (!field.value.trim()) {
                        isValid = false;
                        const errorElement = document.getElementById(`${field.id}Error`);
                        if (errorElement) errorElement.style.display = 'block';
                        field.classList.add('error-field');
                    }
                }
            });
            
            // Validate email format
            const emailField = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailField.value && !emailRegex.test(emailField.value)) {
                isValid = false;
                document.getElementById('emailError').textContent = 'Please enter a valid email address';
                document.getElementById('emailError').style.display = 'block';
                emailField.classList.add('error-field');
            }
            
            return isValid;
        }

        // Form submission to Google Sheets
        function setupFormSubmission() {
            const form = document.getElementById('candidateForm');
            const submitBtn = form.querySelector('.submit-btn');
            
            // Replace with your Google Apps Script Web App URL
            const scriptURL = 'https://script.google.com/macros/s/1zXHrJklgmof-aHCZmDrdjWdBtGYAC_9w4v6VqlyrMPqKrekvo9CUcXvj/exec';
            
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                if (!validateForm()) {
                    alert('Please fill in all required fields correctly.');
                    return;
                }
                
                // Show loading state
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;
                
                try {
                    // Prepare form data
                    const formData = new FormData(form);
                    const data = {};
                    
                    // Convert FormData to object
                    for (let [key, value] of formData.entries()) {
                        if (data[key]) {
                            // If the key already exists, convert to array
                            if (Array.isArray(data[key])) {
                                data[key].push(value);
                            } else {
                                data[key] = [data[key], value];
                            }
                        } else {
                            data[key] = value;
                        }
                    }
                    
                    // Handle checkbox groups
                    const certifications = [];
                    document.querySelectorAll('input[name="certifications"]:checked').forEach(cb => {
                        certifications.push(cb.value);
                    });
                    data.certifications = certifications;
                    
                    const profDevelopment = [];
                    document.querySelectorAll('input[name="profDevelopment"]:checked').forEach(cb => {
                        profDevelopment.push(cb.value);
                    });
                    data.profDevelopment = profDevelopment;
                    
                    // Handle radio groups
                    const gender = document.querySelector('input[name="gender"]:checked');
                    if (gender) data.gender = gender.value;
                    
                    const postDegreeExp = document.querySelector('input[name="postDegreeExp"]:checked');
                    if (postDegreeExp) data.postDegreeExp = postDegreeExp.value;
                    
                    const basicComputer = document.querySelector('input[name="basicComputer"]:checked');
                    if (basicComputer) data.basicComputer = basicComputer.value;
                    
                    const onlinePlatforms = document.querySelector('input[name="onlinePlatforms"]:checked');
                    if (onlinePlatforms) data.onlinePlatforms = onlinePlatforms.value;
                    
                    const lms = document.querySelector('input[name="lms"]:checked');
                    if (lms) data.lms = lms.value;
                    
                    const edTech = document.querySelector('input[name="edTech"]:checked');
                    if (edTech) data.edTech = edTech.value;
                    
                    const contentCreation = document.querySelector('input[name="contentCreation"]:checked');
                    if (contentCreation) data.contentCreation = contentCreation.value;
                    
                    // Handle file upload
                    const cvFile = document.getElementById('cvUpload').files[0];
                    if (cvFile) {
                        // In a real implementation, you would need to handle file uploads differently
                        // For now, we'll just store the file name
                        data.cvUpload = cvFile.name;
                    }
                    
                    // Send data to Google Apps Script
                    const response = await fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                    
                    // Show success message
                    document.getElementById('successMessage').style.display = 'block';
                    form.reset();
                    
                    // Reset progress bar
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) progressFill.style.width = '0%';
                    
                    // Scroll to top
                    window.scrollTo(0, 0);
                    
                } catch (error) {
                    console.error('Submission error:', error);
                    alert('There was an error submitting your form. Please try again.');
                } finally {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }
            });
        }

        // Initialize all functionality
        document.addEventListener('DOMContentLoaded', () => {
            setupConditionalFields();
            setupFormSubmission();
            
            const form = document.getElementById('candidateForm');
            if (form) {
                form.addEventListener('input', updateProgressBar);
                form.addEventListener('change', updateProgressBar);
            }
            
            updateProgressBar();
        });
    </script>
</body>
</html>
